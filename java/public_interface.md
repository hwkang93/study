
> '오브젝트' 라는 책을 읽다가 정리가 필요하다고 생각해 정리하는 글.
> 
> 인터페이스에 대한 정리가 너무 깔끔했다.
> 
> 인터페이스가 무엇인가를 정의하는 것이 아닌 더 나은 인터페이스를 작성하는 방법에 대해 정리 해봄

# Public Interface

퍼블릭 인터페이스란, 객체가 의사소통을 위해 외부에 공개하는 메시지의 집합을 말한다.

인터페이스에 선언하는 메서드를 **오퍼레이션(operation)** 이라고 한다.
오퍼레이션은 수행 가능한 어떤 행동에 대한 추상화다.

UML 에서 정의한 오퍼레이션 : 실행하기 위해 객체가 호출될 수 있는 변환이나 정의에 관한 명세

이에 반해 메서드는 실제로 수행하는 어떤 행동을 말한다. 인터페이스의 구현체에서 구현된 오퍼레이션 코드를 메서드라고 한다.

클라이언트에서 호출한 인터페이스의 함수는 메서드를 호출했다는 표현을 쓰기보다는 오퍼레이션을 호출했다는 표현이 더 정확하다.

## 좋은 인터페이스를 작성하기 위해서 고려해볼 것들

책에서는 두 가지 조건을 제시한다.

1. 최소한의 인터페이스
2. 추상적인 인터페이스

여기서 최소한의 인터페이스란 꼭 필요한 오퍼레이션만 인터페이스에 선언하라는 것이고, 
추상적인 인터페이스란 선언한 오퍼레이션은 어떻게 수행하는 것에 초점을 맞추지 말고 오퍼레이션이 무엇을 하는 지에 초점을 맞추라는 것이다.

위의 두 가지 조건을 만족하기 위해서는 다음 네 가지의 원칙이 필요하다.

### 디미터 법칙

객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한하라는 것.
객체의 내부 속성에는 최소한의 접근만 허용해야 변수명 변경이나 변수의 추가 삭제에 대해 발생하는 문제를 줄일 수 있다.

아래의 조건을 만족하는 인스턴스에만 메시지를 전송해야 한다.
- this 객체
- 메서드의 매개변수
- this 의 속성
- this 의 속성인 컬렉션의 요소
- 메서드 내에서 생성된 지역 객체



### 묻지 말고 시켜라

상태를 묻는(객체에 선언된 getter 와 같은) 오퍼레이션을 행동을 요청하는(시키는) 오퍼레이션으로 대체해 인터페이스의 질을 향상시키자.
메시지 전송자가 메시지 수신자가 가지고 있는 내부 상태를 이용해 어떤 결정을 내리는 것은 메시지 수신자의 책임이 외부로 누수된 것이다.

### 의도를 드러내는 인터페이스

인터페이스의 오퍼레이션을 정의할 때에는 '어떻게' 가 아니라 '무엇을' 하는지의 의도를 드러내는 것이다.
오퍼레이션의 명칭을 보고 클라이언트는 오퍼레이션의 구현체가 어떤 식으로 동작하는 지 알면 안된다.

> 만약 구현체의 동작 방식이 바뀐다면 오퍼레이션 명칭도 바뀌어야 할 것이다.

의도를 드러내는 인터페이스를 작성하기 위해서는 클라이언트가 원하는 것이 무엇인지를 알고 그 의도에 맞게 오퍼레이션을 작성해야 한다.
클라이언트가 원하는 결과를 생각하고 의도를 좀 더 분명하게 표현하면 더 나은 인터페이스를 작성하는 데 도움이 될 것이다.

### 함께 모으기

위의 세 가지 원칙을 모두 포함하는 인터페이스를 작성하자.

## 원칙이 정답은 아니다

위에서 설명한 원칙들은 분명 더 나은 인터페이스를 작성하기 위해 제시한 방법들이다.
하지만 이 원칙들을 모두 지키며 만들어진 인터페이스가 항상 최선일 수는 없다.
맹목적으로 위의 원칙들을 지켜가며 작성된 인터페이스는 인터페이스 안에 어울리지 않는 오퍼레이션이 생길 수 있다.
어떤 책임을 가지고 있는 객체가 위의 원칙을 지키면, 다른 객체에게 책임을 위임하는 상황이 발생할 수도 있고
객체의 응집도가 낮아질 수도 있다. 가끔은 객체의 내부 속성을 조회해야만 원하는 결과를 얻을 수도 있다.

소스코드에는 정답이 없다.
주어진 상황에 대해 더 나은 선택을 하고, 더 나은 선택을 하기 위해 위의 방법들을 참고하는 것이 최선의 방법일 것이다.

소프트웨어의 설계에는 법칙이라는 것은 존재하지 않는다고 한다.
그리고, 몇 안되는 법칙 중 하나가 **"경우에 따르라"** 라고 한다.
기억하자.

## 마치며

무의식적으로 작성하는 getter, setter 메소드들은 객체들의 역할과 책임을 제대로 표현하지 않고 본인의 책임을 외부에 위임한다.
이러한 코드를 작성하는 것을 지양하고, 객체들의 역할과 책임에 맞게 소스코드를 작성하는 습관을 기르자.

그리고, 물론 소스코드에는 정답이 없지만 오답으로 작성된 소스코드는 만들지 않도록 노력하자.




## Reference

오브젝트 - 조영호
